function save_results_to_file(results, filename)
    fid = fopen(filename, 'w');
    fprintf(fid, '%s Classification Results\n', results.feature_type);
    fprintf(fid, 'File Name,Cosine,Euclidean,Manhattan,Cosine_Conf,Euclidean_Conf,Manhattan_Conf\n');
    for i = 1:length(results.filenames)
        fprintf(fid, '%s,%d,%d,%d,%.3f,%.3f,%.3f\n', ...
            results.filenames{i}, ...
            results.cosine_predictions(i), ...
            results.euclidean_predictions(i), ...
            results.manhattan_predictions(i), ...
            results.cosine_confidences(i), ...
            results.euclidean_confidences(i), ...
            results.manhattan_confidences(i));
    end
    fclose(fid);
    fprintf('Results saved to %s\n', filename);
end
